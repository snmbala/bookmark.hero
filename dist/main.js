function Z(){const w=document.documentElement,d=document.getElementById("settings-icon-svg");d&&(w.classList.contains("dark")?d.querySelectorAll("path").forEach(h=>{h.setAttribute("stroke","#a5b4fc")}):d.querySelectorAll("path").forEach(h=>{h.setAttribute("stroke","#4f46e5")}))}document.addEventListener("DOMContentLoaded",Z);window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Z);function ae(){function w(d,h=!0){if(document.querySelectorAll(".theme-button").forEach(x=>{x.dataset.theme===d?(x.classList.add("bg-indigo-50","border-indigo-400","text-zinc-900","dark:bg-indigo-500/10","dark:border-indigo-500","dark:text-zinc-100"),x.classList.remove("text-zinc-600","border-zinc-200","dark:text-zinc-400","dark:border-zinc-700")):(x.classList.remove("bg-indigo-50","border-indigo-400","text-zinc-900","dark:bg-indigo-500/10","dark:border-indigo-500","dark:text-zinc-100"),x.classList.add("text-zinc-600","border-zinc-200","dark:text-zinc-400","dark:border-zinc-700"))}),d==="system"){const x=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.classList.toggle("dark",x)}else document.documentElement.classList.toggle("dark",d==="dark");h&&chrome.storage.sync.set({theme:d})}chrome.storage.sync.get(["theme"],function(d){const h=d.theme||"system";w(h,!1)}),document.querySelectorAll(".theme-button").forEach(d=>{d.addEventListener("click",()=>{w(d.dataset.theme)})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",d=>{chrome.storage.sync.get(["theme"],function(h){h.theme==="system"&&w("system",!1)})})}chrome.bookmarks.getTree(function(w){const d=document.getElementById("folder-list"),h=document.getElementById("search-input"),x=document.getElementById("clear-search"),B=document.getElementById("search-icon"),T=document.getElementById("filter"),S=document.getElementById("folder-view"),A=document.getElementById("recents-view"),U=document.getElementById("recents-icon"),ee=document.getElementById("settings-btn");let k=0,L=!0,z=[];ae();let P=!1;const M=document.getElementById("settings-modal");ee.addEventListener("click",function(e){e.stopPropagation(),M.classList.toggle("hidden"),P=!M.classList.contains("hidden")}),M.addEventListener("click",function(e){e.stopPropagation()}),document.addEventListener("click",function(){P&&!M.classList.contains("hidden")&&(M.classList.add("hidden"),P=!1)});function K(e,t=""){if(e.children){t=e.title;for(const n of e.children)K(n,t)}else z.push({bookmark:e,folder:t})}for(const e of w[0].children)K(e);let R=z.sort((e,t)=>{const n=e.bookmark.dateLastUsed||e.bookmark.dateAdded;return(t.bookmark.dateLastUsed||t.bookmark.dateAdded)-n});h.addEventListener("input",function(){if(h.value){x.classList.remove("hidden"),document.activeElement===h?B.src="../assets/icons/search-blue.svg":B.src="../assets/icons/search.svg";const e=h.value.trim().toLowerCase();L?I(e):$(w,e)}else x.classList.add("hidden"),B.src="../assets/icons/search.svg"}),x.addEventListener("click",function(){h.value="",x.classList.add("hidden"),B.src="../assets/icons/search.svg",$(w,"")}),document.addEventListener("keydown",function(e){e.key==="/"&&document.activeElement!==h&&(e.preventDefault(),h.focus())});function N(){L=!L,h.value="",x.classList.add("hidden"),B.src="../assets/icons/search.svg",T.value="all",k=0,D();const e="",t=document.querySelectorAll(".folder-icon"),n=document.getElementById("settings-icon-svg");L?(t.forEach(o=>{o.style.fill="none",o.style.stroke="#a1a1aa"}),S.classList.remove("active"),S.classList.add("in-active"),U.style.fill="#4f46e5",U.style.stroke="#4f46e5",A.classList.add("active"),A.classList.remove("in-active"),n&&n.querySelectorAll("path").forEach(o=>{o.setAttribute("stroke","#4f46e5")}),I(e)):(t.forEach(o=>{o.style.fill="#4f46e5",o.style.stroke="#4f46e5"}),S.classList.add("active"),S.classList.remove("in-active"),U.style.stroke="#a1a1aa",U.style.fill="none",A.classList.remove("active"),A.classList.add("in-active"),n&&n.querySelectorAll("path").forEach(o=>{o.setAttribute("stroke","#a1a1aa")}),$(w,e))}function I(e){R=z.sort((c,i)=>{const s=c.bookmark.dateLastUsed||c.bookmark.dateAdded;return(i.bookmark.dateLastUsed||i.bookmark.dateAdded)-s});let t=R.filter(c=>{const i=!e||y(c.bookmark.title,e)||y(c.bookmark.url,e);if(k&&k!==0&&k!=="all"){const s=c.bookmark.parentId==k;return i&&s}return i});d.innerHTML="";const n=document.createElement("h1");n.textContent=W(e,k,t.length),n.className="flex-start w-full font-semibold text-lg py-2 text-zinc-800 dark:text-zinc-50";const o=document.createElement("div");o.className="w-fit",d.appendChild(o);const l=document.createElement("div");if(l.className="container mx-auto grid my-6 lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 gap-8",o.appendChild(n),o.appendChild(l),console.log("sortedBookmarks",R),t.forEach(c=>{if(!c.children){const i=G(c.bookmark,e);l.appendChild(i)}}),t.length===0){const c=document.createElement("p");c.textContent=e?`No bookmarks found matching "${e}"`:"No bookmarks found.",c.className="text-zinc-500 dark:text-zinc-400 mt-4",o.appendChild(c)}}A.addEventListener("click",N),S.addEventListener("click",N),T.addEventListener("change",function(e){k=e.target.value=="all"?0:e.target.value;const t=h.value.trim().toLowerCase();D(),L?I(t):$(w,t)});function te(e){const t=e,n=document.querySelectorAll(".sublist-container"),o=document.querySelectorAll(".no-folder-list"),l=document.querySelectorAll("h2");if(e===0||e==="all"){n.forEach(function(i){i.style.display="grid"}),o.forEach(function(i){i.style.display="grid"}),l.forEach(function(i){i.style.display="flex"});return}const c=t&&V(t);n.forEach(function(i){!i.id.includes(`-${t}-`)&&!c.includes(i.id)?i.style.display="none":i.style.display="grid"}),o.forEach(function(i){i.id.includes(`-${t}-`)?i.style.display="grid":i.style.display="none"}),l.forEach(function(i){i.id.includes(`-${t}-`)?i.style.display="flex":i.style.display="none"})}let C=[{label:"All",value:"all",level:0,id:0}];function j(e,t=0,n=""){e&&e.length>0&&e.forEach(function(o){o.children&&(o.title&&C.push({label:`${t>0?"-".repeat(t-1)+" ":""}`+o.title,value:o.id,level:t,id:n+"-"+o.id+"-"}),j(o.children,t+1,n+"-"+o.id))})}if(j(w),console.log("filterOptions",C),C.forEach(function(e){const t=document.createElement("option");t.value=e.value,t.textContent=e.label,t.className="flex-center flex-col bg-zinc-100 w-44 h-32 rounded shadow-md text-zinc-800 text-sm font-normal cursor-pointer py-5",T.appendChild(t)}),setTimeout(()=>{D(),console.log("Filter icon updated after options populated")},200),!d){console.error("Unable to find 'folder-list' element");return}if(!h){console.error("Unable to find 'search-input' element");return}function $(e,t){console.log("filterBookmarks called with:",{bookmarks:e,searchTerm:t,FILTER_ID:k}),d.innerHTML="";let n=0,o=[];if(e&&e.length>0){const i=e[0];if(k&&k!==0&&k!=="all"){let r=function(g,a){if(g.id===a)return g;if(g.children)for(const f of g.children){const v=r(f,a);if(v)return v}return null};var c=r;const u=r(i,k);if(u){n=H(u,t),console.log("[filterBookmarks] Filtered folder found:",u.title),console.log("[filterBookmarks] Total bookmarks in folder (including subfolders):",n);const g=document.createElement("h1");g.textContent=W(t,k,n),g.className="flex-start w-full font-semibold text-lg py-2 text-zinc-800 dark:text-zinc-50",d.appendChild(g);const a=document.createElement("div");a.className="no-folder-list container my-6 gap-x-8 gap-y-6 grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 w-full",a.id=`no-folder-list-${k}`;let f=!1,v=0;if(u.children){for(const m of u.children)if(!m.children&&m.url&&(!t||y(m.title,t)||y(m.url,t))){const F=G(m,t);a.appendChild(F),f=!0,v++}}console.log(`[filterBookmarks] Direct bookmarks found: ${v}, hasDirectBookmarks: ${f}`),d.appendChild(a);let E=0;if(u.children){for(const m of u.children)if(m.children){const p=_(m,t);p&&(d.appendChild(p),E++)}}if(console.log(`[filterBookmarks] Subfolders rendered: ${E}`),n===0){const m=document.createElement("p");m.textContent=t?`No bookmarks found matching "${t}"`:"No bookmarks found.",m.className="text-zinc-500 dark:text-zinc-400 mt-4",d.appendChild(m)}console.log("[filterBookmarks] Completed rendering for filtered folder, skipping hideBookmarks");return}}(i.children||[]).forEach(function(r){if(r.children){const u=_(r,t);if(u){o.push(u);const g=Q(r,t,k);n+=g}}})}const l=document.createElement("h1");if(l.textContent=W(t,k,n),l.className="flex-start w-full font-semibold text-lg py-2 text-zinc-800 dark:text-zinc-50",d.appendChild(l),o.forEach(i=>{d.appendChild(i)}),n===0){const i=document.createElement("p");i.textContent=t?`No bookmarks found matching "${t}"`:"No bookmark folders found.",i.className="text-zinc-500 dark:text-zinc-400 mt-4",d.appendChild(i)}te(k)}function V(e){const t=C.find(n=>n.value===e);return t?t.id:(console.warn(`No filter option found for bookmark ID: ${e}`),`fallback-${e}`)}function W(e,t,n){const o=e&&e.trim().length>0,l=t&&t!==0&&t!=="all";let c="",i="";if(l){const s=C.find(r=>r.value==t);s&&(c=s.label.replace(/^[\s\-]*/,""),i=c.includes("- ")?c.replace(/\s*-\s*/g," > "):c)}return o&&l?n===0?`No results for "${e}" in ${i}`:`Results for "${e}" in ${i} (${n})`:o?n===0?`No results for "${e}"`:`Results for "${e}" (${n})`:l?`Folder: ${i} (${n})`:`Bookmarks (${n})`}function Q(e,t,n){let o=0;if(!e.children)return 0;if(n&&n!==0&&n!=="all"){const l=C.find(c=>c.value==n);if(l&&e.id!==n&&!(l.id&&l.id.includes(`-${e.id}-`)))return 0}return e.children.forEach(l=>{l.children?o+=Q(l,t,n):l.url&&(!t||y(l.title,t)||y(l.url,t))&&o++}),o}function H(e,t){let n=0;if(e.children)for(const o of e.children)n+=H(o,t);else e.url&&(!t||y(e.title,t)||y(e.url,t))&&n++;return n}function ne(e,t,n){const o=e.title,l=H(e,t),c=t&&t.trim().length>0,i=n&&n!==0&&n!=="all";return l===0?null:c&&i?`${o} - Results for "${t}" (${l})`:c?`${o} - Results for "${t}" (${l})`:i?`${o} (${l})`:`${o} (${l})`}function _(e,t,n,o,l){const c=document.createElement("div");try{c.id=V(e.id)}catch(i){console.error("Error computing ID for bookmark:",e.title,i),c.id=`fallback-${e.id}`}if(c.className=n||"flex-center flex-col m-auto gap-4",e.children&&e.children.length>0){const i=ne(e,t,k);if(i===null)return null;const s=document.createElement("h2");try{s.id=V(e.id)}catch(a){console.error("Error computing ID for folder title:",e.title,a),s.id=`fallback-title-${e.id}`}s.textContent=i||"Untitled",s.className=l||"container flex-start w-full text-semibold text-zinc-600 text-lg py-2 dark:text-zinc-200";const r=document.createElement("div");r.className=o||"all-sublist-container";const u=document.createElement("div");try{u.id=V(e.id)}catch(a){console.error("Error computing ID for noFolderList:",a),u.id=`fallback-nofolder-${e.id}`}u.className="no-folder-list container my-6 gap-x-8 gap-y-6 grid lg:grid-cols-4 md:grid-cols-3 sm:grid-cols-2 w-full ";let g=[];for(const a of e.children)if(a.children){const f=_(a,t,"sublist-container container w-full flex-center flex-col gap-3","","sublist-title container flex-start w-full text-semibold text-zinc-600 dark:text-zinc-300 text-lg py-2");f&&g.push(f)}else if(a.url&&(!t||y(a.title,t)||y(a.url,t))){const v=G(a,t);u.appendChild(v)}return r.appendChild(s),r.appendChild(u),g.forEach(a=>{r.appendChild(a)}),c.appendChild(r),c}return null}function G(e,t){const n=document.createElement("div");n.className="relative card min-w-60 flex flex-col border-[1.5px] bg-white border-zinc-200; dark:border-zinc-700 hover:border-indigo-500 hover:shadow-md hover:shadow-indigo-100 dark:hover:shadow-indigo-700 rounded-md overflow-hidden";const o=document.createElement("button");o.className="absolute top-0 right-0 m-1 p-1 bg-zinc-500 hover:bg-zinc-600 dark:bg-zinc-700 dark:hover:bg-zinc-800 rounded-full border-none cursor-pointer close-button",o.addEventListener("click",function(E){E.stopPropagation(),re(E,e)});const l=document.createElement("img");l.src="../assets/icons/more.svg",l.alt="Close",l.className="h-4 w-4",o.appendChild(l),n.appendChild(o);const c=document.createElement("a");c.href=e.url,c.target="_blank",c.className="flex-center flex-col gap-3 card-thumbnail w-full h-40 border-b-[1.5px] bg-zinc-100 dark:bg-zinc-700 dark:border-zinc-600",J(e.url,function(E){const m=document.createElement("img");if(m.src=E,m.alt=e.url||"Bookmark thumbnail",c.appendChild(m),X(e.title,E),E.startsWith("https://www.google.com/s2/favicons?domain=")){const p=document.createElement("button");p.textContent="Capture Thumbnail",p.className="text-zinc-800 dark:text-zinc-200 border-zinc-300 dark:border-zinc-700 bg-white hover:bg-zinc-50 dark:bg-zinc-800 dark:hover:bg-zinc-900 font-semibold py-2 px-4 border shadow rounded-full",p.id="capture-"+e.url,p.addEventListener("click",function(F){F.preventDefault(),Y(e.url,e.title),c.removeChild(p)}),c.appendChild(p)}}),n.appendChild(c),c.addEventListener("click",function(E){const m=new Date().getTime();for(const p of z)if(p.bookmark.id===e.id){p.bookmark.dateLastUsed=m,console.log("Date last used updated for bookmark:",p);break}});const i=document.createElement("div");i.className="flex-center h-24 flex-col bg-white dark:bg-zinc-800 px-2 py-4";const s=document.createElement("div");s.className="flex-start w-full h-5";const r=document.createElement("a");r.className="flex-start text-base font-medium text-zinc-800 dark:text-zinc-50 whitespace-nowrap overflow-hidden text-ellipsis",r.href=e.url,r.target="_blank",r.innerHTML=q(e.title||"Untitled",t),s.appendChild(r),r.addEventListener("click",function(E){console.log("clicked");const m=new Date().getTime();for(const p of z)if(p.bookmark.id===e.id){p.bookmark.dateLastUsed=m,console.log("Date last used updated for bookmark:",p);break}}),i.appendChild(s),setTimeout(()=>{r.offsetWidth>216&&s.classList.add("text-scroll")},0);const u=document.createElement("div");u.className="flex-start w-full h-5 overflow-hidden";const g=document.createElement("p");g.className="flex-start text-zinc-800 dark:text-zinc-300 whitespace-nowrap",g.title=e.url;const a=new URL(e.url);let f=a.hostname.replace(/^www\./,"");const v=a.pathname;if(v&&v!=="/"?f=q(f,t)+`<span class="text-zinc-400 whitespace-nowrap">${q(v,t)}</span>`:f=q(f,t),g.innerHTML=f,u.appendChild(g),i.appendChild(u),L){const E=C.find(F=>F.value===e.parentId)?.label.replace(/^[-\s]+/,"")||"",m=document.createElement("div");m.className="flex-start w-full mt-1",i.appendChild(m);const p=document.createElement("span");p.textContent=E,p.className="flex-center w-fit h-5 px-1 py-0.5 rounded-md bg-zinc-200 dark:bg-zinc-700 dark:text-zinc-50 border border-zinc-300 dark:border-zinc-600",m.appendChild(p)}return n.appendChild(c),n.appendChild(i),n}function Y(e,t){if(!e){console.error("URL is empty");return}const n=1024,o=683;chrome.windows.create({url:e,type:"popup",width:n,height:o,left:Math.round((screen.width-n)/2),top:Math.round((screen.height-o)/2)},function(l){l.tabs[0].id,chrome.tabs.onUpdated.addListener(function c(i,s){i===i&&s.status==="complete"&&(chrome.tabs.onUpdated.removeListener(c),setTimeout(function(){chrome.tabs.captureVisibleTab(l.id,{format:"png"},function(r){r?oe(r,100,function(u){ie(e,u),X(e,u)}):console.error("Failed to capture screenshot for URL:",e),chrome.windows.remove(l.id)})},1e3))})})}function oe(e,t,n){const o=new Image;o.src=e,o.onload=function(){const l=document.createElement("canvas"),c=l.getContext("2d");l.width=1024,l.height=683,c.drawImage(o,0,0,l.width,l.height);let i=1;for(;;){const s=l.toDataURL("image/jpeg",i);if(s.length/1024<=t||i<=.1){n(s);break}else i-=.1}}}function ie(e,t){const n=e,o=t;chrome.storage.local.set({[n]:o},function(){chrome.runtime.lastError&&console.error(chrome.runtime.lastError.message)})}function J(e,t){const n=e;chrome.storage.local.get([n],function(o){if(chrome.runtime.lastError)t(`https://www.google.com/s2/favicons?domain=${e}`);else{const l=o[n];t(l||`https://www.google.com/s2/favicons?domain=${e}`)}})}function X(e,t){const n=document.querySelector(`img[alt='${e}']`);n?n.src=t:console.error("Thumbnail image element not found for title:",e)}function y(e,t){return t.split(" ").every(o=>e.toLowerCase().includes(o))}function q(e,t){if(!t||!e)return e;const n=t.toLowerCase().split(/\s+/).filter(l=>l.length>0);let o=e;return n.forEach(l=>{const c=new RegExp(`(${l})`,"gi");o=o.replace(c,'<mark class="bg-yellow-200 dark:bg-yellow-600 dark:text-zinc-100 px-0.5 rounded-sm">$1</mark>')}),o}function le(e){const t=e.url;chrome.bookmarks.remove(e.id,function(){console.log(`Deleted bookmark: ${e.title}`),chrome.storage.local.remove([t],function(){z=z.filter(o=>o.bookmark.id!==e.id),R=z.sort((o,l)=>{const c=o.bookmark.dateLastUsed||o.bookmark.dateAdded;return(l.bookmark.dateLastUsed||l.bookmark.dateAdded)-c});const n=h.value.trim().toLowerCase();L?I(n):chrome.bookmarks.getTree(function(o){d.innerHTML="",$(o,n)})})})}document.getElementById("save-edit").addEventListener("click",function(){const e=document.getElementById("edit-title"),t=document.getElementById("edit-url"),n=e.value.trim(),o=t.value.trim(),c=document.getElementById("folder-dropdown").value;n||o||c?chrome.bookmarks.move(O.id,{parentId:c},function(i){chrome.runtime.lastError?console.error("Failed to move bookmark:",chrome.runtime.lastError.message):i?chrome.bookmarks.update(O.id,{title:n,url:o},function(){window.location.reload()}):console.error("Failed to move bookmark: Unknown error.")}):console.error("Invalid input or selected folder.")}),document.getElementById("cancel-edit").addEventListener("click",function(){se()});let O=null;function ce(e){const t=document.getElementById("edit-modal"),n=document.getElementById("edit-title"),o=document.getElementById("edit-url");n.value=e.title||"",o.value=e.url||"",t.classList.remove("hidden")}function se(){document.getElementById("edit-modal").classList.add("hidden")}let b=null;function re(e,t){b&&b.remove(),O=t;const n=document.getElementById("folder-dropdown");if(n.children.length||C.slice(1).forEach(function(s){const r=document.createElement("option");r.value=s.value,r.textContent=s.label,r.selected=s.value===O.parentId,n.appendChild(r)}),b&&b.previousElementSibling===e.target){b.remove(),b=null;return}if(b){i();return}const o=document.createElement("div");o.className="absolute z-10 flex flex-col bg-zinc-800 w-44 h-32 rounded shadow-md text-zinc-100 hover:text-zinc-50 text-sm font-light flex-center flex-col";function l(s,r,u,g){const a=document.createElement("div");a.className="flex-start w-full h-9 px-3 py-1.5 hover:bg-zinc-700 active:bg-zinc-700";const f=document.createElement("img");f.src=r,f.alt=s,f.className="w-4 h-4 mr-3",a.appendChild(f);const v=document.createElement("button");return v.textContent=s,v.className=u||"flex-start text-left",v.addEventListener("click",g),a.appendChild(v),a}J(t.url,function(s){const r=s.startsWith("https://www.google.com/s2/favicons?domain=")?"Capture Thumbnail":"Refresh Thumbnail",u=l(r,"../assets/icons/camera.svg",null,function(f){f.preventDefault(),Y(t.url,t.title),document.getElementById(`capture-${t.url}`).remove(),i()});o.appendChild(u);const g=l("Edit","../assets/icons/edit.svg",null,function(f){i(),f.preventDefault(),ce(t)});o.appendChild(g);const a=l("Delete","../assets/icons/trash.svg","flex-grow text-left",function(f){f.preventDefault(),confirm("Are you sure you want to delete this bookmark?")&&le(t),i()});o.appendChild(a)});const c=e.target.getBoundingClientRect();o.style.top=`${c.bottom+window.scrollY+4}px`,o.style.right=`${window.innerWidth-c.right-4}px`,document.body.appendChild(o),b=o;function i(){b&&(b.remove(),b=null,document.removeEventListener("click",i))}document.addEventListener("click",i),e.stopPropagation()}I(""),(function(){const e=document.querySelectorAll(".theme-toggle-btn");if(!e.length)return;const t=document.documentElement;function n(i){chrome?.storage?.sync?chrome.storage.sync.get(["appearanceMode"],s=>i(s.appearanceMode||"auto")):i(localStorage.getItem("appearanceMode")||"auto")}function o(i){chrome?.storage?.sync?chrome.storage.sync.set({appearanceMode:i}):localStorage.setItem("appearanceMode",i)}function l(i){e.forEach((s,r)=>{s.classList.remove("bg-indigo-50","border-2","border-indigo-400","text-indigo-700","bg-white","text-zinc-500","dark:bg-indigo-500/10","dark:border-indigo-400","dark:text-indigo-200","dark:bg-zinc-700","dark:text-zinc-300","rounded-l-md","rounded-r-md"),s.classList.add("bg-white","text-zinc-500","dark:bg-zinc-700","dark:text-zinc-300"),r===0&&s.classList.add("rounded-l-md"),r===e.length-1&&s.classList.add("rounded-r-md"),i==="auto"&&s.getAttribute("data-theme")==="auto"||i==="light"&&s.getAttribute("data-theme")==="light"||i==="dark"&&s.getAttribute("data-theme")==="dark"?(s.classList.remove("bg-white","text-zinc-500","dark:bg-zinc-700","dark:text-zinc-300"),s.classList.add("bg-indigo-50","border-2","border-indigo-400","text-indigo-700","dark:bg-indigo-500/10","dark:border-indigo-400","dark:text-indigo-200")):s.classList.remove("border-2","border-indigo-400","text-indigo-700","dark:bg-indigo-500/10","dark:border-indigo-400","dark:text-indigo-200")})}function c(i){i==="dark"?t.classList.add("dark"):i==="light"?t.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches?t.classList.add("dark"):t.classList.remove("dark")}n(i=>{l(i),c(i)}),e.forEach(i=>{i.addEventListener("click",()=>{const s=i.getAttribute("data-theme");o(s),l(s),c(s)})}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",i=>{n(s=>{s==="auto"&&c("auto")})})})();function D(){const e=document.getElementById("filter"),t=document.getElementById("filter-dropdown-arrow"),n=document.getElementById("filter-clear");console.log("updateFilterIcon called - filter value:",e?.value),console.log("Elements found:",{filterSelect:!!e,chevron:!!t,clearIcon:!!n}),e&&t&&n?e.value&&e.value!=="all"?(t.classList.add("hidden"),n.classList.remove("hidden"),console.log("Clear icon shown, chevron hidden")):(t.classList.remove("hidden"),n.classList.add("hidden"),console.log("Chevron shown, clear icon hidden")):console.warn("Missing elements for updateFilterIcon:",{filterSelect:!!e,chevron:!!t,clearIcon:!!n})}setTimeout(()=>{const e=document.getElementById("filter"),t=document.getElementById("filter-clear");D(),console.log("Initial filter icon state set"),t&&t.addEventListener("click",function(){if(console.log("Clear icon clicked"),e){e.value="all",k=0,D();const n=h.value.trim().toLowerCase();L?I(n):$(w,n)}})},100)});
